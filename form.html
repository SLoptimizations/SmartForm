<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- Generated by responder.co.il -->
    <script type="text/javascript">
        function responder_validation(form) {
            var inputs = form.getElementsByTagName('input');
            var selects = form.getElementsByTagName('select');
            var filter_email = /^([\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+\.)*[\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+@((((([a-z0-9]{1}[a-z0-9\-]{0,62}[a-z0-9]{1})|[a-z0-9])\.)+[a-z]{2,})|(\d{1,3}\.){3}\d{1,3}(\:\d{1,5})?)$/i;
            var filter_phone = /^(?:|(?:050|051|052|053|054|055|057|058|02|03|04|08|09)\d{7,7})$/;

            var lstSelected = document.getElementById("lst_selected")
            lstSelected.value = document.getElementById("example-select").value
            console.log(lstSelected.value)


            for (a=0; a<inputs.length; a++) {
                switch (inputs[a].name) {
                    case 'fields[subscribers_email]':
                        if (!filter_email.test(inputs[a].value)) {
                            alert('כתובת הדוא"ל אינה חוקית');
                            inputs[a].focus();
                            return false;
                        }

                        break;
                    case 'fields[subscribers_phone]':
                        var phone = inputs[a].value.replace(/-|\s/g, '');
                        if (!filter_phone.test(phone.length==0 || phone.charAt(0)=='0' ? phone : '0' + phone)) {
                            alert('מספר הטלפון הנייד אינו חוקי');
                            inputs[a].focus();
                            return false;
                        }

                        break;
                }
            }

            for (a=0; a<selects.length; a++) {
                switch (selects[a].name) {
                }
            }

            if (document.charset)
                form.encoding.value = document.charset;
            else if (document.defaultCharset)
                form.encoding.value = document.defaultCharset;
            else if (document.characterSet)
                form.encoding.value = document.characterSet;

            if (navigator.userAgent.indexOf(';FBAV/') > -1) {
                form.target = '_self';
            }

            return true;
        }


        function get_options(){
            var date = new Date();
            var day = date.getDay();
            var hour = date.getHours();
            var selections = [];
            // monday = 1
            if((day == 0 && hour<20 ) || (day == 2 && hour>20) || (day>2)) {

                // futureDate.setDate(date.getDate() + Math.abs(day-1));
                // var dateTxt = futureDate.getDate()+'.'+futureDate.getMonth()
                var dateTxt = calcDate(day,1)
                selections.push(['שני ('+dateTxt+') בשעה 17:00', '1550511'])
            }

            // thursday = 4
            if((day == 2 && hour<20 ) || (day == 5 && hour>=10) || !(6>day&&day>1)) {

                // futureDate.setDate(date.getDate() + Math.abs(7-4));
                // var dateTxt = futureDate.getDate()+'.'+futureDate.getMonth()
                var dateTxt = calcDate(day,4)
                selections.push(['חמישי ('+dateTxt+') בשעה 18:00', '1550511'])
            }


            // saturday = 6
            if((day == 5 && hour<10 ) || (day == 0 && hour>20) || (5>day>0)) {

                // futureDate.setDate(date.getDate() + Math.abs(7-4));
                // var dateTxt = futureDate.getDate()+'.'+futureDate.getMonth()
                var dateTxt = calcDate(day,6)
                selections.push(['מוצ"ש ('+dateTxt+') בשעה 20:00', '1550511'])
            }

            return selections
        }

        function calcDate(today,target){

            var futureDate = new Date();
            var daysDis;
            if(today>target){
                daysDis = 7 - (today-target);
            }
            else {
                daysDis = target - today;
            }

            futureDate.setDate(futureDate.getDate() + daysDis);
            var dateTxt = futureDate.getDate()+'.'+ (futureDate.getMonth()+1) // month count starts from 0

            return dateTxt

        }


    </script>
</head>
<body>
<style>
    body {
        text-align: center;
    }
    form{


        padding: 10px;
        display: inline-block;

    }
    table{
        display: inline-block;

    }

    input,select{
        padding: 10px;
        margin: 1%;
        width: 100%;
        min-width:380px;
        display: inline-block;
        font-family: "Segoe UI";
        border-radius: 5px;
        border: 0.1px solid lightgrey;
        /*border: 1px solid transparent;*/
        box-shadow:inset 0 2px 3px #F0F0F0, 2px 2px 2px #F0F0F0 ;

        /*box-shadow: inset 0 1px 2px rgba(0,0,0,.39), 0 -1px 1px #FFF, 0 1px 0 #FFF;*/
        /*-webkit-box-shadow:inset 0 0 2px #000;*/
        /*-moz-box-shadow:inset 0 0 10px #000;*/
        /*box-shadow:inset 0 0 10px #000;*/
    }
    select{
        font-weight: bold;
    }

    #submit-btn{
        background-color: limegreen;
        color: white;
        font-size: 2.9vw;
        font-weight: bold;
        box-shadow: inset 0 0px 0px #F0F0F0, 2px 2px 2px #F0F0F0;

    }
</style>
    <form method="post" action="https://subscribe.responder.co.il" onsubmit="return responder_validation(this);">
        <table border="0" dir="rtl">
            <tbody>
            <tr>
                <td><select id="example-select"></select></td>
                <script>
                    var select = document.getElementById("example-select");
                    var options = get_options()
                   options.forEach(op=> {
                        select.options[select.options.length] = new Option(op[0], op[1]);
                    })

                </script>

            </tr>
            <tr>
                <td><input id="email" type="text" name="fields[subscribers_email]"  dir="ltr" placeholder="דואר אלקטרוני" /></td>
            </tr>
            <tr>
                <td><input id="name" type="text" name="fields[subscribers_name]"  dir="rtl" placeholder="שם"/></td>
            </tr>
            <tr>
                <td><input id="phone" type="text" name="fields[subscribers_phone]"  dir="ltr" placeholder="טלפון נייד"/></td>
            </tr>

            <tr>
                <td colspan="2">
                    <input type="hidden" name="form_id" id="lst_selected" />
                    <input type="hidden" name="encoding" value="" />
                    <input id="submit-btn" type="submit" value="לחץ כאן" />
                </td>
            </tr>
            </tbody>
        </table>
    </form>

</body>
</html>



